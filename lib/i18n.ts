export type Language = "zh-tw" | "zh-cn" | "en";

export const DEFAULT_LANGUAGE: Language = "zh-tw";

export const translations = {
  "zh-tw": {
    today: "今日",
    todaysQuote: "今日金句",
    tonightsQuote: "今日一句",
    all: "全部",
    allQuotes: "文字收藏",
    favorites: "我收藏的",
    myFavorites: "我收藏的",
    logout: "登出",
    favorite: "收藏",
    unfavorite: "取消收藏",
    next: "換一句",
    dailyUpdate: "每日更新",
    languageSwitch: "語言切換",
    viewDetails: "查看完整內容",
    originalText: "查看原始文字",
    update: "更新",
    save: "更新",
    clean: "清理",
    processing: "處理中...",
    noQuotes: "目前還沒有金句",
    noFavorites: "目前還沒有收藏的金句",
    addQuote: "新增一個",
    goToFavorites: "前往金句庫",
    quoteContent: "金句內容",
    originalTextLabel: "原始文字",
    cleanedTextLabel: "清理後文字",
    relationship: "關係",
    thisMomentIsYours: "這一刻，只屬於你",
    journalPlaceholder: "這句話，令我想起……",
    journalPlaceholderNight: "如果你想留低一點東西",
    journalSaved: "已為你悄悄保存",
    myMoments: "我的句子",
    noMoments: "目前還沒有片刻",
    edit: "編輯",
    delete: "刪除",
    cancel: "取消",
    confirm: "確定",
    deleteConfirm: "確定要刪除這個片刻嗎？",
    confirmDeleteMoment: "確定要刪除這個片刻嗎？",
    quietShareAMoment: "靜靜分享一刻",
    shareHint: "不會顯示名字，也不會連結帳戶",
    shareQuote: "分享今日金句",
    shareMoment: "分享今日片刻",
    shareButton: "就這樣吧",
    shareButtonAlt: "可以了",
    shareButtonAlt2: "讓它出去",
    afterShareMessage: "如果你也需要一個安靜的地方，\nMementa 在這裡。",
    affirmation1: "你已經好溫柔了",
    affirmation2: "呢一刻，已經被放好",
    affirmation3: "願意停低，本身就好難得",
    returnToToday: "返回今日",
    sitQuietly: "靜靜坐一會",
    longTermEcho: "你曾經喺某一日，願意停低。",
    youDontHaveToBeAnywhere: "你唔需要喺其他地方",
    readTodaysLine: "睇今日一句",
    stayWithThisMoment: "同呢一刻一齊",
    wheneverYoureReady: "當你準備好",
    welcomeToMementa: "Welcome to Mementa",
    takeABreathYoureHere: "Take a breath. You're here.",
    someoneQuietlyLeftThisMoment: "有人靜靜留低咗呢一刻",
    noNeedToRespond: "你唔需要回應",
    justBreathe: "只要呼吸一下",
    received: "收下了",
    thankYouForThisMoment: "謝謝這一刻",
    mementaFooter: "Mementa\n一個安靜存放片刻的地方",
    settings: "我的設定",
    account: "帳號",
    profile: "個人資料",
    displayName: "顯示名稱",
    email: "電子郵件",
    changePassword: "更改密碼",
    notifications: "通知",
    dailyQuoteReminder: "每日金句提醒",
    gentleCheckIn: "溫和提醒",
    notificationTime: "提醒時間",
    moments: "片刻",
    autoSaveEnabled: "自動儲存已啟用",
    oneMomentPerDay: "每日一個片刻",
    editAllowedAfterSave: "儲存後允許編輯",
    language: "語言",
    about: "關於",
    termsOfService: "服務條款",
    privacyPolicy: "隱私政策",
    contact: "聯絡我們",
    feedback: "意見回饋",
    currentPassword: "目前密碼",
    newPassword: "新密碼",
    confirmPassword: "確認新密碼",
    passwordChanged: "密碼已更改",
    profileUpdated: "個人資料已更新",
    accountAndPreferences: "帳戶與偏好",
    languageOption: "語言選項",
    traditionalChinese: "繁體中文",
    simplifiedChinese: "简体中文",
    english: "English"
  },
  "zh-cn": {
    today: "今日",
    todaysQuote: "今日金句",
    tonightsQuote: "今日一句",
    all: "全部",
    allQuotes: "文字收藏",
    favorites: "我收藏的",
    myFavorites: "我收藏的",
    logout: "登出",
    favorite: "收藏",
    unfavorite: "取消收藏",
    next: "换一句",
    dailyUpdate: "每日更新",
    languageSwitch: "语言切换",
    viewDetails: "查看完整内容",
    originalText: "查看原始文字",
    update: "更新",
    save: "更新",
    clean: "清理",
    processing: "处理中...",
    noQuotes: "目前还没有金句",
    noFavorites: "目前还没有收藏的金句",
    addQuote: "新增一个",
    goToFavorites: "前往金句库",
    quoteContent: "金句内容",
    originalTextLabel: "原始文字",
    cleanedTextLabel: "清理后文字",
    relationship: "关系",
    thisMomentIsYours: "这一刻，只属于你",
    journalPlaceholder: "这句话，令我想起……",
    journalPlaceholderNight: "如果你想留下一点东西",
    journalSaved: "已为你悄悄保存",
    myMoments: "我的句子",
    noMoments: "目前还没有片刻",
    edit: "编辑",
    delete: "删除",
    cancel: "取消",
    confirm: "确定",
    deleteConfirm: "确定要删除这个片刻吗？",
    confirmDeleteMoment: "确定要删除这个片刻吗？",
    quietShareAMoment: "静静分享一刻",
    shareHint: "不会显示名字，也不会连结账户",
    shareQuote: "分享今日金句",
    shareMoment: "分享今日片刻",
    shareButton: "就这样吧",
    shareButtonAlt: "可以了",
    shareButtonAlt2: "让它出去",
    afterShareMessage: "如果你也需要一个安静的地方，\nMementa 在这里。",
    affirmation1: "你已经很温柔了",
    affirmation2: "这一刻，已经被放好",
    affirmation3: "愿意停下，本身就很难得",
    returnToToday: "返回今日",
    sitQuietly: "静静坐一会",
    longTermEcho: "你曾经在某一天，愿意停下。",
    youDontHaveToBeAnywhere: "你不需要在其他地方",
    readTodaysLine: "看今日一句",
    stayWithThisMoment: "与这一刻一起",
    wheneverYoureReady: "当你准备好",
    welcomeToMementa: "欢迎来到 Mementa",
    takeABreathYoureHere: "深呼吸。你在这里。",
    someoneQuietlyLeftThisMoment: "有人静静留下了这一刻",
    noNeedToRespond: "你不需要回应",
    justBreathe: "只要呼吸一下",
    received: "收下了",
    thankYouForThisMoment: "谢谢这一刻",
    mementaFooter: "Mementa\n一个安静存放片刻的地方",
    settings: "我的設定",
    account: "账号",
    profile: "个人资料",
    displayName: "显示名称",
    email: "电子邮件",
    changePassword: "更改密码",
    notifications: "通知",
    dailyQuoteReminder: "每日金句提醒",
    gentleCheckIn: "温和提醒",
    notificationTime: "提醒时间",
    moments: "片刻",
    autoSaveEnabled: "自动保存已启用",
    oneMomentPerDay: "每日一个片刻",
    editAllowedAfterSave: "保存后允许编辑",
    language: "语言",
    about: "关于",
    termsOfService: "服务条款",
    privacyPolicy: "隐私政策",
    contact: "联系我们",
    feedback: "意见反馈",
    currentPassword: "当前密码",
    newPassword: "新密码",
    confirmPassword: "确认新密码",
    passwordChanged: "密码已更改",
    profileUpdated: "个人资料已更新",
    accountAndPreferences: "账户与偏好",
    languageOption: "语言选项",
    traditionalChinese: "繁體中文",
    simplifiedChinese: "简体中文",
    english: "English"
  },
  en: {
    today: "Today",
    todaysQuote: "Today's Quote",
    tonightsQuote: "Today's Quote",
    all: "All",
    allQuotes: "Text Collection",
    favorites: "My Favorites",
    myFavorites: "My Favorites",
    logout: "Logout",
    favorite: "Favorite",
    unfavorite: "Unfavorite",
    next: "Next",
    dailyUpdate: "Daily Update",
    languageSwitch: "Language",
    viewDetails: "View Details",
    originalText: "View Original",
    update: "Update",
    save: "Update",
    clean: "Clean",
    processing: "Processing...",
    noQuotes: "No quotes yet",
    noFavorites: "No favorites yet",
    addQuote: "Add One",
    goToFavorites: "Browse Quotes",
    quoteContent: "Quote Content",
    originalTextLabel: "Original Text",
    cleanedTextLabel: "Cleaned Text",
    relationship: "Relationships",
    thisMomentIsYours: "This moment, only yours",
    journalPlaceholder: "This quote reminds me of...",
    journalPlaceholderNight: "If you want to leave something",
    journalSaved: "Quietly saved",
    myMoments: "My Quotes",
    noMoments: "No moments yet",
    settings: "Settings",
    account: "Account",
    profile: "Profile",
    displayName: "Display Name",
    email: "Email",
    changePassword: "Change Password",
    notifications: "Notifications",
    dailyQuoteReminder: "Daily Quote Reminder",
    gentleCheckIn: "Gentle Check-in",
    notificationTime: "Notification Time",
    moments: "Moments",
    autoSaveEnabled: "Auto-save enabled",
    oneMomentPerDay: "One moment per day",
    editAllowedAfterSave: "Edit allowed after save",
    language: "Language",
    about: "About",
    termsOfService: "Terms of Service",
    privacyPolicy: "Privacy Policy",
    contact: "Contact",
    feedback: "Feedback",
    currentPassword: "Current Password",
    newPassword: "New Password",
    confirmPassword: "Confirm New Password",
    passwordChanged: "Password changed",
    profileUpdated: "Profile updated",
    accountAndPreferences: "Account & Preferences",
    languageOption: "Language",
    traditionalChinese: "繁體中文",
    simplifiedChinese: "简体中文",
    english: "English",
    edit: "Edit",
    delete: "Delete",
    cancel: "Cancel",
    confirm: "Confirm",
    deleteConfirm: "Are you sure you want to delete this moment?",
    confirmDeleteMoment: "Are you sure you want to delete this moment?",
    quietShareAMoment: "Quiet Share a Moment",
    shareHint: "No name will be shown, no account linked",
    shareQuote: "Share today's quote",
    shareMoment: "Share today's moment",
    shareButton: "Let it go",
    shareButtonAlt: "That's it",
    shareButtonAlt2: "Release it",
    afterShareMessage: "If you also need a quiet place,\nMementa is here.",
    affirmation1: "You've been so gentle",
    affirmation2: "This moment has been placed",
    affirmation3: "Being willing to pause is itself rare",
    returnToToday: "Return to today",
    sitQuietly: "Sit quietly for a while",
    longTermEcho: "You once, on some day, were willing to pause.",
    youDontHaveToBeAnywhere: "You don't have to be anywhere else right now",
    readTodaysLine: "Read today's line",
    stayWithThisMoment: "Stay with this moment",
    wheneverYoureReady: "Whenever you're ready",
    welcomeToMementa: "Welcome to Mementa",
    takeABreathYoureHere: "Take a breath. You're here.",
    someoneQuietlyLeftThisMoment: "Someone quietly left this moment",
    noNeedToRespond: "You don't need to respond",
    justBreathe: "Just breathe",
    received: "Received",
    thankYouForThisMoment: "Thank you for this moment",
    mementaFooter: "Mementa\nA quiet place to keep moments"
  }
};

export function getTranslation(lang: Language, key: keyof typeof translations["zh-tw"]): string {
  return translations[lang]?.[key] || translations[DEFAULT_LANGUAGE][key];
}

export function filterQuotesByLanguage(quotes: Array<{ cleaned_text_zh_tw: string | null; cleaned_text_zh_cn: string | null; cleaned_text_en: string | null }>, language: Language): Array<{ cleaned_text_zh_tw: string | null; cleaned_text_zh_cn: string | null; cleaned_text_en: string | null }> {
  return quotes.filter(quote => {
    switch (language) {
      case "zh-tw":
        // zh-tw: cleaned_text_zh_tw only (no fallback)
        return (quote.cleaned_text_zh_tw?.trim() || "") !== "";
      case "zh-cn":
        // zh-cn: cleaned_text_zh_cn only (no fallback)
        return (quote.cleaned_text_zh_cn?.trim() || "") !== "";
      case "en":
        // en: cleaned_text_en only (no fallback)
        return (quote.cleaned_text_en?.trim() || "") !== "";
      default:
        // Default to zh-tw
        return (quote.cleaned_text_zh_tw?.trim() || "") !== "";
    }
  });
}

/**
 * Get display text for a quote based on language (cleaned text only, no fallback)
 * Strict language matching: zh-tw → cleaned_text_zh_tw, zh-cn → cleaned_text_zh_cn, en → cleaned_text_en
 */
export function getQuoteDisplayText(
  quote: { cleaned_text_zh_tw: string | null; cleaned_text_zh_cn: string | null; cleaned_text_en: string | null; [key: string]: any },
  language: Language
): string {
  switch (language) {
    case "zh-tw":
      // zh-tw: cleaned_text_zh_tw only (no fallback)
      return quote.cleaned_text_zh_tw?.trim() ?? "";
    case "zh-cn":
      // zh-cn: cleaned_text_zh_cn only (no fallback)
      return quote.cleaned_text_zh_cn?.trim() ?? "";
    case "en":
      // en: cleaned_text_en only (no fallback)
      return quote.cleaned_text_en?.trim() ?? "";
    default:
      // Default to zh-tw
      return quote.cleaned_text_zh_tw?.trim() ?? "";
  }
}

/**
 * Get the editable cleaned text field name based on language
 */
export function getCleanedTextFieldName(language: Language): "cleaned_text_zh_tw" | "cleaned_text_zh_cn" | "cleaned_text_en" {
  switch (language) {
    case "zh-cn":
      return "cleaned_text_zh_cn";
    case "en":
      return "cleaned_text_en";
    case "zh-tw":
    default:
      return "cleaned_text_zh_tw";
  }
}

/**
 * Get the current language's cleaned text value
 */
export function getCurrentLanguageCleanedText(
  quote: { cleaned_text_zh_tw: string | null; cleaned_text_zh_cn: string | null; cleaned_text_en: string | null },
  language: Language
): string {
  switch (language) {
    case "zh-cn":
      return quote.cleaned_text_zh_cn?.trim() ?? "";
    case "en":
      return quote.cleaned_text_en?.trim() ?? "";
    case "zh-tw":
    default:
      return quote.cleaned_text_zh_tw?.trim() ?? "";
  }
}

